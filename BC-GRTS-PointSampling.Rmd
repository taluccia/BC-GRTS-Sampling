---
title: "BC-GRTS-Sampling"
author: "Anna Talucci"
date: "4/28/2021"
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Overview
Generate sample points to extract data in GEE for BRT Analysis. Using Generalized Random Tessellation
Stratified (GRTS). We are opting to use Unstratified, Equal Probability, GRTS Survey for messy data see https://qcnrgradstudentcouncil.files.wordpress.com/2012/12/ecolunch_grts.pdf






## Library
```{r}
library(sp) # spatial data
library(rgdal) # geospatial data
library(raster) # deals with rasters

library(rgeos) # GIS Geometry
library(foreign) # deals with dbf files

library(spsurvey) 
library(dplyr)
```


# Tweedsmuir Fire (2013, R10252)

The perimeter used here as removed large bodies of water and meadows. We were primarily interested in characterizing the forested components. 

```{r}
rdnbrpoly = readOGR("tw_RdNBR_poly.shp", "tw_RdNBR_poly") 
```

```{r}
structure(rdnbrpoly)
```

```{r}
head(rdnbrpoly@data)
```

# GRTS Sampling for Tweeds
 Code adapted from word press site
```{r}
att=rdnbrpoly@data
```

```{r}
Equaldsgn = list(None=list(panel=c(PanelOne=950), over=50, seltype='Equal'))
```

```{r}
seed=sample(10000000, 1)
set.seed(seed)
```

```{r}
Equalsites = grts(design = Equaldsgn, 
                  src.frame = 'shapefile',
                  in.shape='tw_RdNBR_poly',
                  att.frame = att,
                  type.frame = 'area',
                  DesignID = 'sample',
                  shapefile = TRUE,
                  prj = 'tw_RdNBR_poly',
                  out.shape='twsample')
```

```{r}
dsgnsum(Equalsites)
```
Print the inital six lines of the survey  design
```{r}
head(Equalsites@data)
```


# Entiako Fire (2012, R10171)
The perimeter used here as removed large bodies of water and meadows. We were primarily interested in characterizing the forested components. 

```{r}
en_rdnbrpoly = readOGR("en_RdNBR_poly.shp", "en_RdNBR_poly") 
```

```{r}
structure(en_rdnbrpoly)
```

```{r}
head(en_rdnbrpoly@data)
```

# GRTS Sampling for Entiako
Code adapted from word press site
```{r}
att=en_rdnbrpoly@data
```

```{r}
en_Equaldsgn = list(None=list(panel=c(PanelOne=3889), over=50, seltype='Equal'))
```

```{r}
seed=sample(10000000, 1)
set.seed(seed)
```

```{r}
en_Equalsites = grts(design = en_Equaldsgn, 
                  src.frame = 'shapefile',
                  in.shape='en_RdNBR_poly',
                  att.frame = att,
                  type.frame = 'area',
                  DesignID = 'sample',
                  shapefile = TRUE,
                  prj = 'en_RdNBR_poly',
                  out.shape='ensample')
```

Print the inital six lines of the survey  design
```{r}
head(en_Equalsites@data)
```

# Chelaslie Fire (2014, R10070)
The perimeter used here as removed large bodies of water and meadows. We were primarily interested in characterizing the forested components. 

```{r}
ch_rdnbrpoly = readOGR("ch_RdNBR_poly.shp", "ch_RdNBR_poly") 
```

```{r}
structure(ch_rdnbrpoly)
```

```{r}
head(ch_rdnbrpoly@data)
```

# GRTS Sampling for Entiako
Code adapted from word press site
```{r}
att=ch_rdnbrpoly@data
```

```{r}
ch_Equaldsgn = list(None=list(panel=c(PanelOne=55556), over=50, seltype='Equal'))
```

```{r}
seed=sample(10000000, 1)
set.seed(seed)
```

```{r}
ch_Equalsites = grts(design = ch_Equaldsgn, 
                  src.frame = 'shapefile',
                  in.shape='ch_RdNBR_poly',
                  att.frame = att,
                  type.frame = 'area',
                  DesignID = 'sample',
                  shapefile = TRUE,
                  prj = 'ch_RdNBR_poly',
                  out.shape='chsample')
```

Print the inital six lines of the survey  design
```{r}
head(ch_Equalsites@data)
```



**THE END**
